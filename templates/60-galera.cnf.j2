[galera]
bind-address=0.0.0.0
binlog_format=ROW
innodb_autoinc_lock_mode=2
innodb_flush_log_at_trx_commit=0
wsrep_on=ON
wsrep_provider=/usr/lib/galera/libgalera_smm.so
{% set galera_ips = [] %}
{% for host in groups['galera'] %}
{%   set _ = galera_ips.append(hostvars[host]['ansible_host']) %}
{% endfor %}
wsrep_cluster_address="gcomm://{{ galera_ips | join(',') }}"
wsrep_cluster_name="my_galera_cluster"
wsrep_node_name="{{ inventory_hostname }}"
wsrep_node_address="{{ ansible_host }}"
wsrep_sst_method=rsync
wsrep_provider_options="socket.ssl_key=/etc/mysql/ssl/server-key.pem;socket.ssl_cert=/etc/mysql/ssl/server-cert.pem;socket.ssl_ca=/etc/mysql/ssl/ca-cert.pem"
